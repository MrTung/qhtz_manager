{"remainingRequest":"/Users/dongxuwei/Desktop/分销系统/manager/node_modules/babel-loader/lib/index.js!/Users/dongxuwei/Desktop/分销系统/manager/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dongxuwei/Desktop/分销系统/manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dongxuwei/Desktop/分销系统/manager/src/views/mission/taskinfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dongxuwei/Desktop/分销系统/manager/src/views/mission/taskinfo.vue","mtime":1567600223220},{"path":"/Users/dongxuwei/Desktop/分销系统/manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/分销系统/manager/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/分销系统/manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/分销系统/manager/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport CountTo from \"vue-count-to\";\nimport { getFormList, getDeliveroptions, getFormRules } from \"./form.js\";\nimport Qs from \"qs\";\nexport default {\n  name: \"taskInfo\",\n  components: {\n    CountTo: CountTo\n  },\n  props: {\n    isShowDialog: Boolean,\n    taskData: {\n      type: Object\n    }\n  },\n  watch: {\n    taskData: function taskData(newValue, oldValue) {\n      this.taskInfo = newValue;\n      this.mainForm = this.taskInfo;\n      this.formList = JSON.parse(this.mainForm.content);\n      var form = {};\n      this.formList.forEach(function (item) {\n        form[item.field] = item.value;\n      });\n      this.otherForm = form;\n      this.getCommentImgurl();\n    }\n  },\n  data: function data() {\n    return {\n      dialogImageUrl: \"\",\n      additionSalary: 0,\n      //重标签的金额\n      fileList: [],\n      taskInfo: null,\n      dialogVisible: false,\n      commentImages: [],\n      //好评图片\n      shopList: [],\n      formList: [],\n      shoptypelist: [],\n      loading: false,\n      deliveroptions: [],\n      formRules: {},\n      otherForm: {},\n      mainForm: {\n        id: \"\",\n        //任务id\n        shopId: \"\",\n        //店铺\n        missionType: \"\",\n        //任务类型 淘宝京东\n        clientType: \"PC\",\n        //终端类型  手机端  pc\n        goodsUrl: \"\",\n        //商品链接\n        goodsTitle: \"\",\n        //商品名称\n        commentUrl: \"\",\n        //带图好评\n        keyWords: \"\",\n        //关键词\n        goodsImg: \"\",\n        //商品主图   url\n        payMent: \"平台担保\",\n        // 付款方式  平台担保  立返  远程代付\n        unitPrice: \"\",\n        //商品单价\n        buyNum: \"1\",\n        //每单购买数量\n        showMoney: \"\",\n        salary: \"\",\n        //每单佣金\n        goodsType: \"实物\",\n        //商品类型  虚拟 实物\n        deliverTime: \"发货3天后好评\",\n        //收货时间   1天后 2天后\n        evaluateRequire: \"默认好评\",\n        //评价要求 文字好评  五星好评 带图评价\n        missionQuantity: \"1\",\n        //任务数量\n        assess: \"\",\n        //指定好评内容\n        message: \"\" //商家备注留言\n\n      }\n    };\n  },\n  computed: {\n    getbalance: function getbalance() {\n      var userinfo = this.$store.state.userinfo;\n      return userinfo.balance;\n    },\n    getbasePrice: function getbasePrice() {\n      var userinfo = this.$store.state.userinfo;\n      return userinfo.basePrice;\n    },\n    getGoodsprice: function getGoodsprice() {\n      if (this.mainForm.payMent == \"商家远程代付\") return 0;\n      var total = this.mainForm.unitPrice * this.mainForm.buyNum * this.mainForm.missionQuantity;\n      return total;\n    },\n    getSalary: function getSalary() {\n      var total = this.mainForm.salary * this.mainForm.missionQuantity;\n      return total.toFixed(2);\n    },\n    getAlltakeoff: function getAlltakeoff() {\n      var t = this.getSalary * 1 + this.getGoodsprice * 1;\n      return t.toFixed(2);\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    //获取店铺类型\n    this.axios.get(this.urls.shoptypelist).then(function (response) {\n      _this.shoptypelist = response.data;\n    }); //获取店铺列表\n\n    this.getShopList(); //获取动态form\n\n    this.formList = getFormList(); //获取收货时间数据\n\n    this.deliveroptions = getDeliveroptions(); //获取校验表单规则数据\n\n    this.formRules = getFormRules();\n  },\n  mounted: function mounted() {\n    if (this.taskInfo) {\n      this.mainForm = this.taskInfo;\n      this.formList = JSON.parse(this.mainForm.content);\n      var form = {};\n      this.formList.forEach(function (item) {\n        form[item.field] = item.value;\n      });\n      this.otherForm = form;\n    } else {\n      //新增任务\n      var _form = {};\n      this.formList.forEach(function (item) {\n        _form[item.field] = item.value;\n      });\n      this.otherForm = _form;\n    }\n  },\n  methods: {\n    //根据好评图片的数据获取好评图片的地址\n    getCommentImgurl: function getCommentImgurl() {\n      var _this2 = this;\n\n      if (this.mainForm.commentUrl) {\n        var arr = this.mainForm.commentUrl.split(\",\");\n\n        var _that = this;\n\n        _that.commentImages = [];\n        arr.forEach(function (item) {\n          if (item) {\n            _this2.axios.get(_this2.urls.getFileurl + \"?id=\" + item).then(function (response) {\n              if (response.code == 0) return _this2.$message.error(response.msg);\n\n              _that.commentImages.push(_this2.urls.imgbaseurl + response.data.substring(2, response.data.length));\n            });\n          }\n        });\n      }\n    },\n    //获取店铺列表\n    getShopList: function getShopList() {\n      var _this3 = this;\n\n      var param = {\n        businessId: this.$store.state.userinfo ? this.$store.state.userinfo.id : \"\",\n        name: \"\",\n        _uiName_: \"eleme\",\n        _pagination: \"{'pageNumber':1,'pageSize':10}\"\n      };\n      this.axios.get(this.urls.shoplist + \"?\" + Qs.stringify(param)).then(function (response) {\n        _this3.shopList = response.data.list;\n      });\n    },\n    //dialog关闭按钮\n    handleClose: function handleClose() {\n      // this.isNewDialog = false;\n      this.$emit(\"editDialog\", false);\n    }\n  }\n};",null]}