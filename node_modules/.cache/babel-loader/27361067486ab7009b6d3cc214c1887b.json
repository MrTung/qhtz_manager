{"remainingRequest":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/babel-loader/lib/index.js!/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/src/views/mission/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/src/views/mission/index.vue","mtime":1567846802514},{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/dongxuwei/Desktop/\\u7CFB\\u7EDF\\u76F8\\u5173/\\u4EE3\\u7801/advance-platform/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _qs = _interopRequireDefault(require(\"qs\"));\n\nvar _index = require(\"@/utils/index.js\");\n\nvar _taskinfo = _interopRequireDefault(require(\"./taskinfo\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  components: {\n    TaskInfo: _taskinfo.default\n  },\n  filters: {\n    statusFilter: function statusFilter(status) {\n      var statusMap = {\n        草稿: \"info\",\n        待审核: \"gray\",\n        审核中: \"primary\",\n        发布成功: \"success\",\n        任务完成: \"danger\"\n      };\n      return statusMap[status];\n    }\n  },\n  computed: {\n    getbalance: function getbalance() {\n      var userinfo = this.$store.state.userinfo;\n      return userinfo.balance;\n    }\n  },\n  data: function data() {\n    return {\n      currentPage: 1,\n      pageSize: 5,\n      total: 0,\n      selectTaskData: {},\n      dialogTableVisible: false,\n      statusList: [],\n      list: null,\n      listLoading: true,\n      form: {\n        shopid: \"\",\n        taskStatusId: \"\",\n        starttime: \"\",\n        endtime: \"\",\n        _uiName_: \"eleme\"\n      }\n    };\n  },\n  created: function created() {\n    this.fetchData();\n    this.getStatusList();\n  },\n  methods: {\n    handleClose: function handleClose(done) {\n      this.$confirm(\"确认关闭？\").then(function (_) {\n        done();\n      }).catch(function (_) {});\n    },\n    //获取任务状态列表\n    getStatusList: function getStatusList() {\n      var _this = this;\n\n      this.axios.get(this.urls.statuslist).then(function (response) {\n        _this.statusList = response.data;\n      });\n    },\n    //获取店铺列表\n    formatTime: function formatTime(row, column, cellValue) {\n      return (0, _index.getTimeDate)(cellValue);\n    },\n    onCancel: function onCancel() {\n      this.form.shopid = \"\";\n      this.form.taskStatusId = \"\";\n      this.form.starttime = \"\";\n      this.form.endtime = \"\";\n    },\n    fetchData: function fetchData() {\n      var _this2 = this;\n\n      var page = {\n        pageNumber: this.currentPage,\n        pageSize: this.pageSize\n      };\n      this.form[\"_pagination\"] = JSON.stringify(page);\n      this.listLoading = true; //获取任务列表\n\n      this.axios.get(this.urls.getMissionList + \"?\" + _qs.default.stringify(this.form)).then(function (response) {\n        _this2.list = response.data.list;\n        _this2.total = response.data.totalRow;\n        _this2.listLoading = false;\n      });\n    },\n    //发布任务\n    publish: function publish(index, row) {\n      var _this3 = this;\n\n      var g = 0;\n\n      if (row.payMent == \"商家远程代付\") {\n        g = 0;\n      } else {\n        g = row.unitPrice * row.buyNum * row.missionQuantity;\n      }\n\n      var s = row.salary * row.missionQuantity;\n      if (this.getbalance < g + s) return this.$message.error(\"您的账户余额不足以发布本次任务,请充值后再试\");\n      var h = this.$createElement;\n      var t = g + s;\n      this.$msgbox({\n        title: \"提示\",\n        message: h(\"p\", null, [h(\"span\", null, \"本次任务将从您的账户扣除 \"), h(\"span\", {\n          style: \"color: red;font-size:19px;font-weight:bold\"\n        }, \"￥\" + t), h(\"span\", null, \",是否发布?\")]),\n        showCancelButton: true,\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        beforeClose: function beforeClose(action, instance, done) {\n          if (action === \"confirm\") {\n            var param = {\n              id: row.id\n            };\n\n            _this3.axios.post(_this3.urls.changgeMissionstatus + \"?\" + _qs.default.stringify(param)).then(function (response) {\n              _this3.fetchData();\n\n              _this3.$message({\n                message: \"发布成功!\",\n                type: \"success\"\n              });\n            });\n\n            done();\n          } else {\n            done();\n          }\n        }\n      }).then(function (action) {});\n    },\n    handleEdit: function handleEdit(index, row) {\n      this.$router.push({\n        name: \"newtask\",\n        params: {\n          form: row\n        }\n      });\n    },\n    operationHandle: function operationHandle(index, row) {\n      this.dialogTableVisible = true;\n      this.selectTaskData = row;\n    },\n    editDialogListener: function editDialogListener(bol) {\n      this.dialogTableVisible = bol;\n    },\n    //修改任务状态\n    editMisson: function editMisson() {// let param = {\n      //   businessId: this.$store.state.userinfo.id,\n      //   shopName: this.form.shopName,\n      //   shopAccount: this.form.shopAccount,\n      //   shopType: this.form.shopType,\n      //   businessId: this.$store.state.userinfo.id,\n      //   shopUrl: this.form.shopUrl\n      // };\n      // this.axios\n      //   .post(this.urls.changgeMissionstatus + \"?\" + Qs.stringify(param))\n      //   .then(response => {\n      //     this.fetchData();\n      //   });\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.pageSize = val;\n      this.fetchData();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.fetchData();\n    }\n  }\n};\nexports.default = _default;",null]}