{"remainingRequest":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/thread-loader/dist/cjs.js!/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/babel-loader/lib/index.js!/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/src/views/dashboard/components/Info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/src/views/dashboard/components/Info.vue","mtime":1564235050840},{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/系统相关/代码/advance-platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _objectSpread from \"/Users/dongxuwei/Desktop/\\u7CFB\\u7EDF\\u76F8\\u5173/\\u4EE3\\u7801/advance-platform/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread2\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from \"vuex\";\nimport { getTimeDate } from \"@/utils/index.js\";\nimport Qs from \"qs\";\nexport default {\n  filters: {\n    statusFilter: function statusFilter(status) {\n      var statusMap = {\n        正常: \"success\",\n        pending: \"danger\"\n      };\n      return statusMap[status];\n    }\n  },\n  data: function data() {\n    return {\n      fileurl1: \"\",\n      fileurl2: \"\",\n      fileurl3: \"\",\n      form: {\n        userId: \"\",\n        name: \"\",\n        address: \"\",\n        trueName: \"\",\n        idCard: \"\",\n        contact1: \"\",\n        contact2: \"\",\n        contact3: \"\",\n        wechat: \"\",\n        qq: \"\",\n        files: \"\"\n      },\n      fileList: [],\n      formRules: {\n        userId: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入手机号码\"\n        }],\n        name: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入商户名称\"\n        }],\n        trueName: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入真实姓名\"\n        }],\n        address: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入商户地址\"\n        }],\n        idCard: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入身份证号\"\n        }],\n        wechat: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入微信号\"\n        }],\n        qq: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入QQ号码\"\n        }]\n      }\n    };\n  },\n  computed: _objectSpread({}, mapGetters([\"userinfo\"]), {\n    getLastlogintime: function getLastlogintime() {\n      return getTimeDate(this.$store.state.userinfo.dbUpdateSysTime);\n    },\n    getBusinessStatus: function getBusinessStatus() {\n      var userinfo = this.$store.state.userinfo;\n      return userinfo.statusName;\n    },\n    getFoomdisabled: function getFoomdisabled() {\n      var userinfo = this.$store.state.userinfo;\n      return userinfo.businessStatusId == 4 || userinfo.businessStatusId == 6;\n    }\n  }),\n  mounted: function mounted() {\n    this.getBusinessinfo();\n  },\n  methods: {\n    getFileName: function getFileName(url) {\n      if (!url || url.length == 0) return \"\";\n      var arr = url.split(\"/\");\n      return arr[arr.length - 1];\n    },\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      this.$refs.form.validate(function (valid) {\n        if (valid) {\n          var filestr = \"\"; //整理文件参数\n\n          if (_this.fileList.length < 3) {\n            return _this.$message.error(\"请上传身份证件\");\n          } else {\n            _this.fileList.forEach(function (item) {\n              filestr = filestr + item.fileId + \",\";\n            });\n          }\n\n          var param = {\n            id: JSON.parse(_this.userinfo).id,\n            name: _this.form.name,\n            trueName: _this.form.trueName,\n            idCard: _this.form.idCard,\n            address: _this.form.address,\n            contact1: _this.form.contact1,\n            contact2: _this.form.contact2,\n            contact3: _this.form.contact3,\n            wechat: _this.form.wechat,\n            qq: _this.form.qq,\n            files: filestr.substring(0, filestr.length - 1)\n          };\n\n          _this.axios.put(_this.urls.editinfo + \"?\" + Qs.stringify(param)).then(function (response) {\n            if (response.code == 0) return _this.$message.error(response.msg);\n\n            _this.$store.commit(\"userinfo\", response.data);\n\n            _this.$message({\n              message: \"操作成功\",\n              type: \"success\"\n            });\n\n            _this.getBusinessinfo();\n          });\n        }\n      });\n    },\n    onEdit: function onEdit() {\n      var _this2 = this;\n\n      this.$refs.form.validate(function (valid) {\n        if (valid) {\n          var param = {\n            id: JSON.parse(_this2.userinfo).id,\n            name: _this2.form.name,\n            trueName: _this2.form.trueName,\n            idCard: _this2.form.idCard,\n            address: _this2.form.address,\n            contact1: _this2.form.contact1,\n            contact2: _this2.form.contact2,\n            contact3: _this2.form.contact3,\n            wechat: _this2.form.wechat,\n            qq: _this2.form.qq,\n            files: _this2.form.files\n          };\n\n          _this2.axios.put(_this2.urls.editinfo + \"?\" + Qs.stringify(param)).then(function (response) {\n            if (response.code == 0) return _this2.$message.error(response.msg);\n\n            _this2.$message({\n              message: \"操作成功\",\n              type: \"success\"\n            });\n\n            _this2.getBusinessinfo();\n          });\n        }\n      });\n    },\n    //获取商户基本信息\n    getBusinessinfo: function getBusinessinfo() {\n      var _this3 = this;\n\n      this.axios.get(this.urls.businessinfo).then(function (response) {\n        if (response.code == 0) return _this3.$message.error(response.msg);\n        var userinfo = response.data;\n\n        _this3.$store.commit(\"userinfo\", userinfo);\n\n        _this3.form = userinfo;\n\n        _this3.getFilesUrl();\n\n        switch (userinfo.businessStatusId) {\n          case \"1\":\n          case \"2\":\n          case \"3\":\n            _this3.$refs.p.style.color = \"orange\";\n            break;\n\n          case \"4\":\n            _this3.$refs.p.style.color = \"green\";\n            break;\n\n          case \"5\":\n            _this3.$refs.p.style.color = \"red\";\n            break;\n\n          default:\n            break;\n        }\n      });\n    },\n    //获取商户资料信息\n    getFilesUrl: function getFilesUrl() {\n      var _this4 = this;\n\n      if (this.form.files.length == 0) return;\n      var arr = this.form.files.split(\",\");\n      this.axios.get(this.urls.getFileurl + \"?id=\" + arr[0]).then(function (response) {\n        if (response.code == 0) return _this4.$message.error(response.msg);\n        _this4.fileurl1 = _this4.urls.imgbaseurl + response.data.substring(2, response.data.length);\n      });\n      this.axios.get(this.urls.getFileurl + \"?id=\" + arr[1]).then(function (response) {\n        if (response.code == 0) return _this4.$message.error(response.msg);\n        _this4.fileurl2 = _this4.urls.imgbaseurl + response.data.substring(2, response.data.length);\n      });\n      this.axios.get(this.urls.getFileurl + \"?id=\" + arr[2]).then(function (response) {\n        if (response.code == 0) return _this4.$message.error(response.msg);\n        _this4.fileurl3 = _this4.urls.imgbaseurl + response.data.substring(2, response.data.length);\n      });\n    },\n    handleRemove: function handleRemove(file, fileList) {\n      console.log(file, fileList);\n      this.fileList.pop(file);\n    },\n    handlePreview: function handlePreview(file) {\n      console.log(file);\n    },\n    beforeRemove: function beforeRemove(file, fileList) {\n      return this.$confirm(\"\\u786E\\u5B9A\\u79FB\\u9664 \".concat(file.name, \"\\uFF1F\"));\n    },\n    handleChange: function handleChange(file, fileList) {\n      this.fileList = fileList;\n    },\n    //导入附件的excel表格成功回调\n    upElSuccess: function upElSuccess(response, file, fileList) {\n      if (response) {\n        file.fileId = response.data[0];\n      }\n    }\n  }\n};",null]}