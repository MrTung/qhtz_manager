{"remainingRequest":"/Users/dongxuwei/Desktop/分销系统/manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dongxuwei/Desktop/分销系统/manager/src/views/business/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dongxuwei/Desktop/分销系统/manager/src/views/business/index.vue","mtime":1568553247875},{"path":"/Users/dongxuwei/Desktop/分销系统/manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/分销系统/manager/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/分销系统/manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dongxuwei/Desktop/分销系统/manager/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getTimeDate } from \"@/utils/index.js\";\nimport Qs from \"qs\";\n// 1，未完善资料，2、已提交资料，待平台审核，3、审核中，4、审核通过，5、审核失败，6、正常，7、锁定，8，黑名单\nexport default {\n  components: {},\n\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        1: \"info\",\n        2: \"gray\",\n        3: \"gray\",\n        4: \"success\",\n        5: \"danger\",\n        6: \"success\",\n        7: \"danger\",\n        8: \"danger\"\n      };\n      return statusMap[status];\n    }\n  },\n  data() {\n    return {\n      currentPage: 1,\n      pageSize: 5,\n      total: 0,\n\n      dialogTableVisible: false,\n      selectTaskData: {},\n\n      list: null,\n      listLoading: true,\n      form: {\n        businessStatusId: \"\",\n        starttime: \"\",\n        endtime: \"\",\n        _uiName_: \"eleme\"\n      }\n    };\n  },\n  created() {},\n  computed: {},\n  mounted() {\n    this.fetchData();\n  },\n  methods: {\n    formatTime(row, column, cellValue) {\n      return getTimeDate(cellValue);\n    },\n    resetForm(formName) {\n      this.form.businessStatusId = \"\";\n      this.form.starttime = this.form.endtime = \"\";\n    },\n\n    //获取用户列表\n    fetchData() {\n      let page = { pageNumber: this.currentPage, pageSize: this.pageSize };\n\n      this.form[\"_pagination\"] = JSON.stringify(page);\n      this.listLoading = true;\n      this.axios\n        .get(this.urls.getbusinesslist + \"?\" + Qs.stringify(this.form))\n        .then(response => {\n          if (response.data.errcode == 0)\n            return this.$message.error(response.data.errmsg);\n          this.list = response.data.accounts;\n          this.total = response.data.total_results;\n\n          this.listLoading = false;\n        });\n    },\n    operationHandle(index, row, type) {\n      this.$confirm(\"是否确认执行此操作?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        let param = {\n          businessId: row.id,\n          businessStatusId: type\n        };\n        switch (type) {\n          case 5:\n            this.operationRemote(this.urls.businessstatus, param); //拒绝\n            break;\n          case 6:\n            this.operationRemote(this.urls.businessstatus, param); //通过\n            break;\n          case 7:\n            this.operationRemote(this.urls.businessstatus, param); //拉黑\n            break;\n          default:\n            break;\n        }\n      });\n    },\n\n    operationRemote(url, param) {\n      this.axios.put(url + \"?\" + Qs.stringify(param)).then(response => {\n        this.fetchData();\n      });\n    },\n    lookinfo(index, row) {\n      this.dialogTableVisible = true;\n      this.selectTaskData = row;\n    },\n    editDialogListener(bol) {\n      this.dialogTableVisible = bol;\n    },\n    setBasePrice(index, row) {\n      this.$prompt(\"请输入协商好的拥挤折扣\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        inputPattern: /^\\+?[1-9]\\d*$/,\n        inputErrorMessage: \"请输入有效数字\"\n      })\n        .then(({ value }) => {\n          let param = {\n            id: row.id,\n            name: row.name,\n            trueName: row.trueName,\n            idCard: row.idCard,\n            address: row.address,\n            contact1: row.contact1,\n            contact2: row.contact2,\n            contact3: row.contact3,\n            wechat: row.wechat,\n            qq: row.qq,\n            basePrice: value,\n            files: row.files\n          };\n          this.axios\n            .put(this.urls.editinfo + \"?\" + Qs.stringify(param))\n            .then(response => {\n              if (response.code == 0) return this.$message.error(response.msg);\n              this.$message({\n                message: \"操作成功\",\n                type: \"success\"\n              });\n              this.fetchData();\n            });\n        })\n        .catch(() => {});\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.fetchData();\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.fetchData();\n    }\n  }\n};\n",null]}